<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è - JavaFlow</title>
    <link rel="stylesheet" href="/css/registration.css" type="text/css"/>
</head>
<body>
<div class="container">
    <header>
        <h1>JavaFlow</h1>
        <p>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</p>
    </header>
    <main>
        <form action="/auth/registration" method="post" onsubmit="return validatePasswords()">
            <!-- –ü–æ–ª–µ –¥–ª—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
            <label for="username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
            <input type="text" id="username" name="username" required>
            <#if usernameError??>
                <p class="error" style="color: red;">${usernameError}</p>
            </#if>

            <!-- –ü–æ–ª–µ –¥–ª—è email -->
            <label for="email">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞:</label>
            <input type="email" id="email" name="email" required>
            <#if emailError??>
                <p class="error" style="color: red;">${emailError}</p>
            </#if>

            <!-- –ü–æ–ª–µ –¥–ª—è –ø–∞—Ä–æ–ª—è -->
            <label for="password">–ü–∞—Ä–æ–ª—å:</label>
            <div class="password-container">
                <input type="password" id="password" name="password" required>
                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('password')">üëÅÔ∏è</button>
            </div>

            <!-- –ü–æ–ª–µ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è -->
            <label for="confirm-password">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:</label>
            <div class="password-container">
                <input type="password" id="confirm-password" name="confirm-password" required>
                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('confirm-password')">üëÅÔ∏è</button>
            </div>

            <!-- –û—à–∏–±–∫–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è -->
            <p id="password-error" style="color: red; display: none;">–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç</p>

            <!-- CSRF —Ç–æ–∫–µ–Ω -->
            <input type="hidden" name="_csrf" value="${_csrf.token}">

            <!-- –ö–Ω–æ–ø–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
            <button type="submit">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
        </form>

        <!-- –û–±—â–∞—è –æ—à–∏–±–∫–∞ –¥–ª—è username –∏ email -->
        <#if bothError??>
            <p class="error" style="color: red;">${bothError}</p>
        </#if>

    </main>
    <footer>
        <p>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="/login">–í–æ–π—Ç–∏</a></p>
    </footer>
</div>

<script>
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
    function validatePasswords() {
        var password = document.getElementById("password").value;
        var confirmPassword = document.getElementById("confirm-password").value;

        if (password !== confirmPassword) {
            document.getElementById("password-error").style.display = "block";
            return false;
        }
        document.getElementById("password-error").style.display = "none";
        return true;
    }

    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è
    function togglePasswordVisibility(fieldId) {
        var field = document.getElementById(fieldId);
        field.type = field.type === "password" ? "text" : "password";
    }
</script>

</body>
</html>